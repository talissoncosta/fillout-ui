import{j as G}from"./jsx-runtime-D_zvdyIk.js";import{r as c,R as Gt}from"./iframe-C1KHkSHS.js";import{i as hn,a as ve,f as wt,u as Rn,b as me,g as ot,c as zt,d as yn,e as st,h as xn,j as En,k as In,o as wn,l as Tn,s as Cn,S as Sn}from"./index-BwKmgDoq.js";import{s as Yt}from"./index-C6D4KHQS.js";import{e as Mn}from"./drag-handler-icon-Bf5aGXdl.js";import{r as An}from"./index-C93_kJ5d.js";/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var On=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ze=On.join(","),Xt=typeof Element>"u",Oe=Xt?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ye=!Xt&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},Xe=function e(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),i=s===""||s==="true",o=i||n&&t&&e(t.parentNode);return o},kn=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Zt=function(t,n,r){if(Xe(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(ze));return n&&Oe.call(t,ze)&&s.unshift(t),s=s.filter(r),s},Jt=function e(t,n,r){for(var s=[],i=Array.from(t);i.length;){var o=i.shift();if(!Xe(o,!1))if(o.tagName==="SLOT"){var u=o.assignedElements(),f=u.length?u:o.children,a=e(f,!0,r);r.flatten?s.push.apply(s,a):s.push({scopeParent:o,candidates:a})}else{var l=Oe.call(o,ze);l&&r.filter(o)&&(n||!t.includes(o))&&s.push(o);var p=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),m=!Xe(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(p&&m){var v=e(p===!0?o.children:p.children,!0,r);r.flatten?s.push.apply(s,v):s.push({scopeParent:o,candidates:v})}else i.unshift.apply(i,o.children)}}return s},Qt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},en=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||kn(t))&&!Qt(t)?0:t.tabIndex},Dn=function(t,n){var r=en(t);return r<0&&n&&!Qt(t)?0:r},Nn=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},tn=function(t){return t.tagName==="INPUT"},Pn=function(t){return tn(t)&&t.type==="hidden"},Fn=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Ln=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},_n=function(t){if(!t.name)return!0;var n=t.form||Ye(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=Ln(s,t.form);return!i||i===t},Kn=function(t){return tn(t)&&t.type==="radio"},Vn=function(t){return Kn(t)&&!_n(t)},Wn=function(t){var n,r=t&&Ye(t),s=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==t){var o,u,f;for(i=!!((o=s)!==null&&o!==void 0&&(u=o.ownerDocument)!==null&&u!==void 0&&u.contains(s)||t!=null&&(f=t.ownerDocument)!==null&&f!==void 0&&f.contains(t));!i&&s;){var a,l,p;r=Ye(s),s=(a=r)===null||a===void 0?void 0:a.host,i=!!((l=s)!==null&&l!==void 0&&(p=l.ownerDocument)!==null&&p!==void 0&&p.contains(s))}}return i},Tt=function(t){var n=t.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},jn=function(t,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var i=Oe.call(t,"details>summary:first-of-type"),o=i?t.parentElement:t;if(Oe.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var u=t;t;){var f=t.parentElement,a=Ye(t);if(f&&!f.shadowRoot&&s(f)===!0)return Tt(t);t.assignedSlot?t=t.assignedSlot:!f&&a!==t.ownerDocument?t=a.host:t=f}t=u}if(Wn(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Tt(t);return!1},$n=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return Oe.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},mt=function(t,n){return!(n.disabled||Xe(n)||Pn(n)||jn(n,t)||Fn(n)||$n(n))},pt=function(t,n){return!(Vn(n)||en(n)<0||!mt(t,n))},qn=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Bn=function e(t){var n=[],r=[];return t.forEach(function(s,i){var o=!!s.scopeParent,u=o?s.scopeParent:s,f=Dn(u,o),a=o?e(s.candidates):u;f===0?o?n.push.apply(n,a):n.push(u):r.push({documentOrder:i,tabIndex:f,item:s,isScope:o,content:a})}),r.sort(Nn).reduce(function(s,i){return i.isScope?s.push.apply(s,i.content):s.push(i.content),s},[]).concat(n)},Qe=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Jt([t],n.includeContainer,{filter:pt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:qn}):r=Zt(t,n.includeContainer,pt.bind(null,n)),Bn(r)},Un=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Jt([t],n.includeContainer,{filter:mt.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Zt(t,n.includeContainer,mt.bind(null,n)),r},nn=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Oe.call(t,ze)===!1?!1:pt(n,t)};function Hn(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function rn(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Gn(){return/apple/i.test(navigator.vendor)}function gt(){const e=/android/i;return e.test(Hn())||e.test(rn())}function zn(){return rn().includes("jsdom/")}const Ct="data-floating-ui-focusable",Yn="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",it="ArrowLeft",ut="ArrowRight",Xn="ArrowUp",Zn="ArrowDown";function xe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ie(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&hn(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Ee(e){return"composedPath"in e?e.composedPath()[0]:e.target}function at(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Jn(e){return e.matches("html,body")}function fe(e){return e?.ownerDocument||document}function on(e){return ve(e)&&e.matches(Yn)}function vt(e){return e?e.getAttribute("role")==="combobox"&&on(e):!1}function Ze(e){return e?e.hasAttribute(Ct)?e:e.querySelector("["+Ct+"]")||e:null}function Me(e,t,n){return n===void 0&&(n=!0),e.filter(s=>{var i;return s.parentId===t&&(!n||((i=s.context)==null?void 0:i.open))}).flatMap(s=>[s,...Me(e,s.id,n)])}function Qn(e,t){let n,r=-1;function s(i,o){o>r&&(n=i,r=o),Me(e,i).forEach(f=>{s(f.id,o+1)})}return s(t,0),e.find(i=>i.id===n)}function St(e,t){var n;let r=[],s=(n=e.find(i=>i.id===t))==null?void 0:n.parentId;for(;s;){const i=e.find(o=>o.id===s);s=i?.parentId,i&&(r=r.concat(i))}return r}function re(e){e.preventDefault(),e.stopPropagation()}function er(e){return"nativeEvent"in e}function sn(e){return e.mozInputSource===0&&e.isTrusted?!0:gt()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function un(e){return zn()?!1:!gt()&&e.width===0&&e.height===0||gt()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Mt(e,t){return["mouse","pen"].includes(e)}var tr=typeof document<"u",nr=function(){},q=tr?c.useLayoutEffect:nr;const rr={...Gt};function Ie(e){const t=c.useRef(e);return q(()=>{t.current=e}),t}const or=rr.useInsertionEffect,sr=or||(e=>e());function ce(e){const t=c.useRef(()=>{});return sr(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function qe(e,t,n){return Math.floor(e/t)!==n}function Ne(e,t){return t<0||t>=e.current.length}function ct(e,t){return Z(e,{disabledIndices:t})}function At(e,t){return Z(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Z(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:s,amount:i=1}=t===void 0?{}:t,o=n;do o+=r?-i:i;while(o>=0&&o<=e.current.length-1&&Ge(e,o,s));return o}function ir(e,t){let{event:n,orientation:r,loop:s,rtl:i,cols:o,disabledIndices:u,minIndex:f,maxIndex:a,prevIndex:l,stopEvent:p=!1}=t,m=l;if(n.key===Xn){if(p&&re(n),l===-1)m=a;else if(m=Z(e,{startingIndex:m,amount:o,decrement:!0,disabledIndices:u}),s&&(l-o<f||m<0)){const v=l%o,b=a%o,d=a-(b-v);b===v?m=a:m=b>v?d:d-o}Ne(e,m)&&(m=l)}if(n.key===Zn&&(p&&re(n),l===-1?m=f:(m=Z(e,{startingIndex:l,amount:o,disabledIndices:u}),s&&l+o>a&&(m=Z(e,{startingIndex:l%o-o,amount:o,disabledIndices:u}))),Ne(e,m)&&(m=l)),r==="both"){const v=wt(l/o);n.key===(i?it:ut)&&(p&&re(n),l%o!==o-1?(m=Z(e,{startingIndex:l,disabledIndices:u}),s&&qe(m,o,v)&&(m=Z(e,{startingIndex:l-l%o-1,disabledIndices:u}))):s&&(m=Z(e,{startingIndex:l-l%o-1,disabledIndices:u})),qe(m,o,v)&&(m=l)),n.key===(i?ut:it)&&(p&&re(n),l%o!==0?(m=Z(e,{startingIndex:l,decrement:!0,disabledIndices:u}),s&&qe(m,o,v)&&(m=Z(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:u}))):s&&(m=Z(e,{startingIndex:l+(o-l%o),decrement:!0,disabledIndices:u})),qe(m,o,v)&&(m=l));const b=wt(a/o)===v;Ne(e,m)&&(s&&b?m=n.key===(i?ut:it)?a:Z(e,{startingIndex:l-l%o-1,disabledIndices:u}):m=l)}return m}function ur(e,t,n){const r=[];let s=0;return e.forEach((i,o)=>{let{width:u,height:f}=i,a=!1;for(n&&(s=0);!a;){const l=[];for(let p=0;p<u;p++)for(let m=0;m<f;m++)l.push(s+p+m*t);s%t+u<=t&&l.every(p=>r[p]==null)?(l.forEach(p=>{r[p]=o}),a=!0):s++}}),[...r]}function ar(e,t,n,r,s){if(e===-1)return-1;const i=n.indexOf(e),o=t[e];switch(s){case"tl":return i;case"tr":return o?i+o.width-1:i;case"bl":return o?i+(o.height-1)*r:i;case"br":return n.lastIndexOf(e)}}function cr(e,t){return t.flatMap((n,r)=>e.includes(n)?[r]:[])}function Ge(e,t,n){if(typeof n=="function")return n(t);if(n)return n.includes(t);const r=e.current[t];return r==null||r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true"}const Le=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function an(e,t){const n=Qe(e,Le()),r=n.length;if(r===0)return;const s=xe(fe(e)),i=n.indexOf(s),o=i===-1?t===1?0:r-1:i+t;return n[o]}function cn(e){return an(fe(e).body,1)||e}function ln(e){return an(fe(e).body,-1)||e}function Pe(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!ie(n,r)}function lr(e){Qe(e,Le()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Ot(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function ao(e){const t=c.useRef(void 0),n=c.useCallback(r=>{const s=e.map(i=>{if(i!=null){if(typeof i=="function"){const o=i,u=o(r);return typeof u=="function"?u:()=>{o(null)}}return i.current=r,()=>{i.current=null}}});return()=>{s.forEach(i=>i?.())}},e);return c.useMemo(()=>e.every(r=>r==null)?null:r=>{t.current&&(t.current(),t.current=void 0),r!=null&&(t.current=n(r))},e)}function fr(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const fn=c.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function dr(e){const{children:t,elementsRef:n,labelsRef:r}=e,[s,i]=c.useState(()=>new Set),o=c.useCallback(a=>{i(l=>new Set(l).add(a))},[]),u=c.useCallback(a=>{i(l=>{const p=new Set(l);return p.delete(a),p})},[]),f=c.useMemo(()=>{const a=new Map;return Array.from(s.keys()).sort(fr).forEach((p,m)=>{a.set(p,m)}),a},[s]);return G.jsx(fn.Provider,{value:c.useMemo(()=>({register:o,unregister:u,map:f,elementsRef:n,labelsRef:r}),[o,u,f,n,r]),children:t})}function mr(e){e===void 0&&(e={});const{label:t}=e,{register:n,unregister:r,map:s,elementsRef:i,labelsRef:o}=c.useContext(fn),[u,f]=c.useState(null),a=c.useRef(null),l=c.useCallback(p=>{if(a.current=p,u!==null&&(i.current[u]=p,o)){var m;const v=t!==void 0;o.current[u]=v?t:(m=p?.textContent)!=null?m:null}},[u,i,o,t]);return q(()=>{const p=a.current;if(p)return n(p),()=>{r(p)}},[n,r]),q(()=>{const p=a.current?s.get(a.current):null;p!=null&&f(p)},[s]),c.useMemo(()=>({ref:l,index:u??-1}),[u,l])}const pr="data-floating-ui-focusable",kt="active",Dt="selected",_e="ArrowLeft",Ke="ArrowRight",dn="ArrowUp",et="ArrowDown",gr={...Gt};let Nt=!1,vr=0;const Pt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+vr++;function br(){const[e,t]=c.useState(()=>Nt?Pt():void 0);return q(()=>{e==null&&t(Pt())},[]),c.useEffect(()=>{Nt=!0},[]),e}const hr=gr.useId,bt=hr||br;function Rr(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const yr=c.createContext(null),xr=c.createContext(null),ht=()=>{var e;return((e=c.useContext(yr))==null?void 0:e.id)||null},tt=()=>c.useContext(xr);function Fe(e){return"data-floating-ui-"+e}function Er(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}let Ft=0;function Ce(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(Ft);const i=()=>e?.focus({preventScroll:n});s?i():Ft=requestAnimationFrame(i)}function Ir(e){return e?.ownerDocument||document}const Ae={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Lt(e){return e==="inert"?Ae.inert:e==="aria-hidden"?Ae["aria-hidden"]:Ae.none}let Be=new WeakSet,Ue={},lt=0;const wr=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,mn=e=>e&&(e.host||mn(e.parentNode)),Tr=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=mn(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Cr(e,t,n,r){const s="data-floating-ui-inert",i=r?"inert":n?"aria-hidden":null,o=Tr(t,e),u=new Set,f=new Set(o),a=[];Ue[s]||(Ue[s]=new WeakMap);const l=Ue[s];o.forEach(p),m(t),u.clear();function p(v){!v||u.has(v)||(u.add(v),v.parentNode&&p(v.parentNode))}function m(v){!v||f.has(v)||[].forEach.call(v.children,b=>{if(zt(b)!=="script")if(u.has(b))m(b);else{const d=i?b.getAttribute(i):null,I=d!==null&&d!=="false",A=Lt(i),h=(A.get(b)||0)+1,R=(l.get(b)||0)+1;A.set(b,h),l.set(b,R),a.push(b),h===1&&I&&Be.add(b),R===1&&b.setAttribute(s,""),!I&&i&&b.setAttribute(i,i==="inert"?"":"true")}})}return lt++,()=>{a.forEach(v=>{const b=Lt(i),I=(b.get(v)||0)-1,A=(l.get(v)||0)-1;b.set(v,I),l.set(v,A),I||(!Be.has(v)&&i&&v.removeAttribute(i),Be.delete(v)),A||v.removeAttribute(s)}),lt--,lt||(Ae.inert=new WeakMap,Ae["aria-hidden"]=new WeakMap,Ae.none=new WeakMap,Be=new WeakSet,Ue={})}}function _t(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Ir(e[0]).body;return Cr(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const nt={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Je=c.forwardRef(function(t,n){const[r,s]=c.useState();q(()=>{Gn()&&s("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Fe("focus-guard")]:"",style:nt};return G.jsx("span",{...t,...i})}),pn=c.createContext(null),Kt=Fe("portal");function Sr(e){e===void 0&&(e={});const{id:t,root:n}=e,r=bt(),s=gn(),[i,o]=c.useState(null),u=c.useRef(null);return q(()=>()=>{i?.remove(),queueMicrotask(()=>{u.current=null})},[i]),q(()=>{if(!r||u.current)return;const f=t?document.getElementById(t):null;if(!f)return;const a=document.createElement("div");a.id=r,a.setAttribute(Kt,""),f.appendChild(a),u.current=a,o(a)},[t,r]),q(()=>{if(n===null||!r||u.current)return;let f=n||s?.portalNode;f&&!me(f)&&(f=f.current),f=f||document.body;let a=null;t&&(a=document.createElement("div"),a.id=t,f.appendChild(a));const l=document.createElement("div");l.id=r,l.setAttribute(Kt,""),f=a||f,f.appendChild(l),u.current=l,o(l)},[t,n,r,s]),i}function Mr(e){const{children:t,id:n,root:r,preserveTabOrder:s=!0}=e,i=Sr({id:n,root:r}),[o,u]=c.useState(null),f=c.useRef(null),a=c.useRef(null),l=c.useRef(null),p=c.useRef(null),m=o?.modal,v=o?.open,b=!!o&&!o.modal&&o.open&&s&&!!(r||i);return c.useEffect(()=>{if(!i||!s||m)return;function d(I){i&&Pe(I)&&(I.type==="focusin"?Ot:lr)(i)}return i.addEventListener("focusin",d,!0),i.addEventListener("focusout",d,!0),()=>{i.removeEventListener("focusin",d,!0),i.removeEventListener("focusout",d,!0)}},[i,s,m]),c.useEffect(()=>{i&&(v||Ot(i))},[v,i]),G.jsxs(pn.Provider,{value:c.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:f,afterOutsideRef:a,beforeInsideRef:l,afterInsideRef:p,portalNode:i,setFocusManagerState:u}),[s,i]),children:[b&&i&&G.jsx(Je,{"data-type":"outside",ref:f,onFocus:d=>{if(Pe(d,i)){var I;(I=l.current)==null||I.focus()}else{const A=o?o.domReference:null,h=ln(A);h?.focus()}}}),b&&i&&G.jsx("span",{"aria-owns":i.id,style:nt}),i&&An.createPortal(t,i),b&&i&&G.jsx(Je,{"data-type":"outside",ref:a,onFocus:d=>{if(Pe(d,i)){var I;(I=p.current)==null||I.focus()}else{const A=o?o.domReference:null,h=cn(A);h?.focus(),o?.closeOnFocusOut&&o?.onOpenChange(!1,d.nativeEvent,"focus-out")}}})]})}const gn=()=>c.useContext(pn);function Vt(e){return c.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const Ar=20;let Se=[];function Or(e){Se=Se.filter(t=>t.isConnected),e&&zt(e)!=="body"&&(Se.push(e),Se.length>Ar&&(Se=Se.slice(-20)))}function Wt(){return Se.slice().reverse().find(e=>e.isConnected)}function kr(e){const t=Le();return nn(e,t)?e:Qe(e,t)[0]||e}function jt(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=Le(),i=Un(e,r).filter(u=>{const f=u.getAttribute("data-tabindex")||"";return nn(u,r)||u.hasAttribute("data-tabindex")&&!f.startsWith("-")}),o=e.getAttribute("tabindex");t.current.includes("floating")||i.length===0?o!=="0"&&e.setAttribute("tabindex","0"):(o!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Dr=c.forwardRef(function(t,n){return G.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:nt})});function Nr(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],guards:i=!0,initialFocus:o=0,returnFocus:u=!0,restoreFocus:f=!1,modal:a=!0,visuallyHiddenDismiss:l=!1,closeOnFocusOut:p=!0,outsideElementsInert:m=!1,getInsideElements:v=()=>[]}=e,{open:b,onOpenChange:d,events:I,dataRef:A,elements:{domReference:h,floating:R}}=t,O=ce(()=>{var M;return(M=A.current.floatingContext)==null?void 0:M.nodeId}),J=ce(v),z=typeof o=="number"&&o<0,Q=vt(h)&&z,ue=wr(),oe=ue?i:!0,be=!oe||ue&&m,Y=Ie(s),pe=Ie(o),se=Ie(u),k=tt(),g=gn(),j=c.useRef(null),V=c.useRef(null),y=c.useRef(!1),T=c.useRef(!1),F=c.useRef(-1),B=g!=null,w=Ze(R),ae=ce(function(M){return M===void 0&&(M=w),M?Qe(M,Le()):[]}),X=ce(M=>{const D=ae(M);return Y.current.map(C=>h&&C==="reference"?h:w&&C==="floating"?w:D).filter(Boolean).flat()});c.useEffect(()=>{if(r||!a)return;function M(C){if(C.key==="Tab"){ie(w,xe(fe(w)))&&ae().length===0&&!Q&&re(C);const S=X(),U=Ee(C);Y.current[0]==="reference"&&U===h&&(re(C),C.shiftKey?Ce(S[S.length-1]):Ce(S[1])),Y.current[1]==="floating"&&U===w&&C.shiftKey&&(re(C),Ce(S[0]))}}const D=fe(w);return D.addEventListener("keydown",M),()=>{D.removeEventListener("keydown",M)}},[r,h,w,a,Y,Q,ae,X]),c.useEffect(()=>{if(r||!R)return;function M(D){const C=Ee(D),U=ae().indexOf(C);U!==-1&&(F.current=U)}return R.addEventListener("focusin",M),()=>{R.removeEventListener("focusin",M)}},[r,R,ae]),c.useEffect(()=>{if(r||!p)return;function M(){T.current=!0,setTimeout(()=>{T.current=!1})}function D(C){const S=C.relatedTarget,U=C.currentTarget,$=Ee(C);queueMicrotask(()=>{const te=O(),ne=!(ie(h,S)||ie(R,S)||ie(S,R)||ie(g?.portalNode,S)||S!=null&&S.hasAttribute(Fe("focus-guard"))||k&&(Me(k.nodesRef.current,te).find(P=>{var L,de;return ie((L=P.context)==null?void 0:L.elements.floating,S)||ie((de=P.context)==null?void 0:de.elements.domReference,S)})||St(k.nodesRef.current,te).find(P=>{var L,de,x;return[(L=P.context)==null?void 0:L.elements.floating,Ze((de=P.context)==null?void 0:de.elements.floating)].includes(S)||((x=P.context)==null?void 0:x.elements.domReference)===S})));if(U===h&&w&&jt(w,Y),f&&U!==h&&!($!=null&&$.isConnected)&&xe(fe(w))===fe(w).body){ve(w)&&w.focus();const P=F.current,L=ae(),de=L[P]||L[L.length-1]||w;ve(de)&&de.focus()}if(A.current.insideReactTree){A.current.insideReactTree=!1;return}(Q||!a)&&S&&ne&&!T.current&&S!==Wt()&&(y.current=!0,d(!1,C,"focus-out"))})}if(R&&ve(h))return h.addEventListener("focusout",D),h.addEventListener("pointerdown",M),R.addEventListener("focusout",D),()=>{h.removeEventListener("focusout",D),h.removeEventListener("pointerdown",M),R.removeEventListener("focusout",D)}},[r,h,R,w,a,k,g,d,p,f,ae,Q,O,Y,A]);const ge=c.useRef(null),W=c.useRef(null),ee=Vt([ge,g?.beforeInsideRef]),he=Vt([W,g?.afterInsideRef]);c.useEffect(()=>{var M,D;if(r||!R)return;const C=Array.from((g==null||(M=g.portalNode)==null?void 0:M.querySelectorAll("["+Fe("portal")+"]"))||[]),S=k?St(k.nodesRef.current,O()):[],U=k&&!a?S.map(P=>{var L;return(L=P.context)==null?void 0:L.elements.floating}):[],$=(D=S.find(P=>{var L;return vt(((L=P.context)==null?void 0:L.elements.domReference)||null)}))==null||(D=D.context)==null?void 0:D.elements.domReference,te=[R,$,...C,...U,...J(),j.current,V.current,ge.current,W.current,g?.beforeOutsideRef.current,g?.afterOutsideRef.current,Y.current.includes("reference")||Q?h:null].filter(P=>P!=null),ne=a||Q?_t(te,!be,be):_t(te);return()=>{ne()}},[r,h,R,a,Y,g,Q,oe,be,k,O,J]),q(()=>{if(r||!ve(w))return;const M=fe(w),D=xe(M);queueMicrotask(()=>{const C=X(w),S=pe.current,U=(typeof S=="number"?C[S]:S.current)||w,$=ie(w,D);!z&&!$&&b&&Ce(U,{preventScroll:U===w})})},[r,b,w,z,X,pe]),q(()=>{if(r||!w)return;const M=fe(w),D=xe(M);Or(D);function C($){let{reason:te,event:ne,nested:P}=$;if(["hover","safe-polygon"].includes(te)&&ne.type==="mouseleave"&&(y.current=!0),te==="outside-press")if(P)y.current=!1;else if(sn(ne)||un(ne))y.current=!1;else{let L=!1;document.createElement("div").focus({get preventScroll(){return L=!0,!1}}),L?y.current=!1:y.current=!0}}I.on("openchange",C);const S=M.createElement("span");S.setAttribute("tabindex","-1"),S.setAttribute("aria-hidden","true"),Object.assign(S.style,nt),B&&h&&h.insertAdjacentElement("afterend",S);function U(){if(typeof se.current=="boolean"){const $=h||Wt();return $&&$.isConnected?$:S}return se.current.current||S}return()=>{I.off("openchange",C);const $=xe(M),te=ie(R,$)||k&&Me(k.nodesRef.current,O(),!1).some(P=>{var L;return ie((L=P.context)==null?void 0:L.elements.floating,$)}),ne=U();queueMicrotask(()=>{const P=kr(ne);se.current&&!y.current&&ve(P)&&(!(P!==$&&$!==M.body)||te)&&P.focus({preventScroll:!0}),S.remove()})}},[r,R,w,se,A,I,k,B,h,O]),c.useEffect(()=>{queueMicrotask(()=>{y.current=!1})},[r]),q(()=>{if(!r&&g)return g.setFocusManagerState({modal:a,closeOnFocusOut:p,open:b,onOpenChange:d,domReference:h}),()=>{g.setFocusManagerState(null)}},[r,g,a,b,d,p,h]),q(()=>{r||w&&jt(w,Y)},[r,w,Y]);function we(M){return r||!l||!a?null:G.jsx(Dr,{ref:M==="start"?j:V,onClick:D=>d(!1,D.nativeEvent),children:typeof l=="string"?l:"Dismiss"})}const Re=!r&&oe&&(a?!Q:!0)&&(B||a);return G.jsxs(G.Fragment,{children:[Re&&G.jsx(Je,{"data-type":"inside",ref:ee,onFocus:M=>{if(a){const C=X();Ce(s[0]==="reference"?C[0]:C[C.length-1])}else if(g!=null&&g.preserveTabOrder&&g.portalNode)if(y.current=!1,Pe(M,g.portalNode)){const C=cn(h);C?.focus()}else{var D;(D=g.beforeOutsideRef.current)==null||D.focus()}}}),!Q&&we("start"),n,we("end"),Re&&G.jsx(Je,{"data-type":"inside",ref:he,onFocus:M=>{if(a)Ce(X()[0]);else if(g!=null&&g.preserveTabOrder&&g.portalNode)if(p&&(y.current=!0),Pe(M,g.portalNode)){const C=ln(h);C?.focus()}else{var D;(D=g.afterOutsideRef.current)==null||D.focus()}}})]})}function $t(e){return ve(e.target)&&e.target.tagName==="BUTTON"}function Pr(e){return ve(e.target)&&e.target.tagName==="A"}function qt(e){return on(e)}function Fr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:i}}=e,{enabled:o=!0,event:u="click",toggle:f=!0,ignoreMouse:a=!1,keyboardHandlers:l=!0,stickIfOpen:p=!0}=t,m=c.useRef(),v=c.useRef(!1),b=c.useMemo(()=>({onPointerDown(d){m.current=d.pointerType},onMouseDown(d){const I=m.current;d.button===0&&u!=="click"&&(Mt(I)&&a||(n&&f&&(!(s.current.openEvent&&p)||s.current.openEvent.type==="mousedown")?r(!1,d.nativeEvent,"click"):(d.preventDefault(),r(!0,d.nativeEvent,"click"))))},onClick(d){const I=m.current;if(u==="mousedown"&&m.current){m.current=void 0;return}Mt(I)&&a||(n&&f&&(!(s.current.openEvent&&p)||s.current.openEvent.type==="click")?r(!1,d.nativeEvent,"click"):r(!0,d.nativeEvent,"click"))},onKeyDown(d){m.current=void 0,!(d.defaultPrevented||!l||$t(d))&&(d.key===" "&&!qt(i)&&(d.preventDefault(),v.current=!0),!Pr(d)&&d.key==="Enter"&&r(!(n&&f),d.nativeEvent,"click"))},onKeyUp(d){d.defaultPrevented||!l||$t(d)||qt(i)||d.key===" "&&v.current&&(v.current=!1,r(!(n&&f),d.nativeEvent,"click"))}}),[s,i,u,a,l,r,n,p,f]);return c.useMemo(()=>o?{reference:b}:{},[o,b])}const Lr={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_r={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Bt=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function Kr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:s,dataRef:i}=e,{enabled:o=!0,escapeKey:u=!0,outsidePress:f=!0,outsidePressEvent:a="pointerdown",referencePress:l=!1,referencePressEvent:p="pointerdown",ancestorScroll:m=!1,bubbles:v,capture:b}=t,d=tt(),I=ce(typeof f=="function"?f:()=>!1),A=typeof f=="function"?I:f,h=c.useRef(!1),{escapeKey:R,outsidePress:O}=Bt(v),{escapeKey:J,outsidePress:z}=Bt(b),Q=c.useRef(!1),ue=c.useRef(-1),oe=ce(g=>{var j;if(!n||!o||!u||g.key!=="Escape"||Q.current)return;const V=(j=i.current.floatingContext)==null?void 0:j.nodeId,y=d?Me(d.nodesRef.current,V):[];if(!R&&(g.stopPropagation(),y.length>0)){let T=!0;if(y.forEach(F=>{var B;if((B=F.context)!=null&&B.open&&!F.context.dataRef.current.__escapeKeyBubbles){T=!1;return}}),!T)return}r(!1,er(g)?g.nativeEvent:g,"escape-key")}),be=ce(g=>{var j;const V=()=>{var y;oe(g),(y=Ee(g))==null||y.removeEventListener("keydown",V)};(j=Ee(g))==null||j.addEventListener("keydown",V)}),Y=ce(g=>{var j;const V=i.current.insideReactTree;i.current.insideReactTree=!1;const y=h.current;if(h.current=!1,a==="click"&&y||V||typeof A=="function"&&!A(g))return;const T=Ee(g),F="["+Fe("inert")+"]",B=fe(s.floating).querySelectorAll(F);let w=me(T)?T:null;for(;w&&!st(w);){const W=xn(w);if(st(W)||!me(W))break;w=W}if(B.length&&me(T)&&!Jn(T)&&!ie(T,s.floating)&&Array.from(B).every(W=>!ie(w,W)))return;if(ve(T)&&k){const W=st(T),ee=En(T),he=/auto|scroll/,we=W||he.test(ee.overflowX),Re=W||he.test(ee.overflowY),M=we&&T.clientWidth>0&&T.scrollWidth>T.clientWidth,D=Re&&T.clientHeight>0&&T.scrollHeight>T.clientHeight,C=ee.direction==="rtl",S=D&&(C?g.offsetX<=T.offsetWidth-T.clientWidth:g.offsetX>T.clientWidth),U=M&&g.offsetY>T.clientHeight;if(S||U)return}const ae=(j=i.current.floatingContext)==null?void 0:j.nodeId,X=d&&Me(d.nodesRef.current,ae).some(W=>{var ee;return at(g,(ee=W.context)==null?void 0:ee.elements.floating)});if(at(g,s.floating)||at(g,s.domReference)||X)return;const ge=d?Me(d.nodesRef.current,ae):[];if(ge.length>0){let W=!0;if(ge.forEach(ee=>{var he;if((he=ee.context)!=null&&he.open&&!ee.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}r(!1,g,"outside-press")}),pe=ce(g=>{var j;const V=()=>{var y;Y(g),(y=Ee(g))==null||y.removeEventListener(a,V)};(j=Ee(g))==null||j.addEventListener(a,V)});c.useEffect(()=>{if(!n||!o)return;i.current.__escapeKeyBubbles=R,i.current.__outsidePressBubbles=O;let g=-1;function j(B){r(!1,B,"ancestor-scroll")}function V(){window.clearTimeout(g),Q.current=!0}function y(){g=window.setTimeout(()=>{Q.current=!1},yn()?5:0)}const T=fe(s.floating);u&&(T.addEventListener("keydown",J?be:oe,J),T.addEventListener("compositionstart",V),T.addEventListener("compositionend",y)),A&&T.addEventListener(a,z?pe:Y,z);let F=[];return m&&(me(s.domReference)&&(F=ot(s.domReference)),me(s.floating)&&(F=F.concat(ot(s.floating))),!me(s.reference)&&s.reference&&s.reference.contextElement&&(F=F.concat(ot(s.reference.contextElement)))),F=F.filter(B=>{var w;return B!==((w=T.defaultView)==null?void 0:w.visualViewport)}),F.forEach(B=>{B.addEventListener("scroll",j,{passive:!0})}),()=>{u&&(T.removeEventListener("keydown",J?be:oe,J),T.removeEventListener("compositionstart",V),T.removeEventListener("compositionend",y)),A&&T.removeEventListener(a,z?pe:Y,z),F.forEach(B=>{B.removeEventListener("scroll",j)}),window.clearTimeout(g)}},[i,s,u,A,a,n,r,m,o,R,O,oe,J,be,Y,z,pe]),c.useEffect(()=>{i.current.insideReactTree=!1},[i,A,a]);const se=c.useMemo(()=>({onKeyDown:oe,...l&&{[Lr[p]]:g=>{r(!1,g.nativeEvent,"reference-press")},...p!=="click"&&{onClick(g){r(!1,g.nativeEvent,"reference-press")}}}}),[oe,r,l,p]),k=c.useMemo(()=>({onKeyDown:oe,onMouseDown(){h.current=!0},onMouseUp(){h.current=!0},[_r[a]]:()=>{i.current.insideReactTree=!0},onBlurCapture(){d||(Er(ue),i.current.insideReactTree=!0,ue.current=window.setTimeout(()=>{i.current.insideReactTree=!1}))}}),[oe,a,i,d]);return c.useMemo(()=>o?{reference:se,floating:k}:{},[o,se,k])}function Vr(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=bt(),i=c.useRef({}),[o]=c.useState(()=>Rr()),u=ht()!=null,[f,a]=c.useState(r.reference),l=ce((v,b,d)=>{i.current.openEvent=v?b:void 0,o.emit("openchange",{open:v,event:b,reason:d,nested:u}),n?.(v,b,d)}),p=c.useMemo(()=>({setPositionReference:a}),[]),m=c.useMemo(()=>({reference:f||r.reference||null,floating:r.floating||null,domReference:r.reference}),[f,r.reference,r.floating]);return c.useMemo(()=>({dataRef:i,open:t,onOpenChange:l,elements:m,events:o,floatingId:s,refs:p}),[t,l,m,o,s,p])}function Wr(e){e===void 0&&(e={});const{nodeId:t}=e,n=Vr({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[i,o]=c.useState(null),[u,f]=c.useState(null),l=s?.domReference||i,p=c.useRef(null),m=tt();q(()=>{l&&(p.current=l)},[l]);const v=Rn({...e,elements:{...s,...u&&{reference:u}}}),b=c.useCallback(R=>{const O=me(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;f(O),v.refs.setReference(O)},[v.refs]),d=c.useCallback(R=>{(me(R)||R===null)&&(p.current=R,o(R)),(me(v.refs.reference.current)||v.refs.reference.current===null||R!==null&&!me(R))&&v.refs.setReference(R)},[v.refs]),I=c.useMemo(()=>({...v.refs,setReference:d,setPositionReference:b,domReference:p}),[v.refs,d,b]),A=c.useMemo(()=>({...v.elements,domReference:l}),[v.elements,l]),h=c.useMemo(()=>({...v,...r,refs:I,elements:A,nodeId:t}),[v,I,A,t,r]);return q(()=>{r.dataRef.current.floatingContext=h;const R=m?.nodesRef.current.find(O=>O.id===t);R&&(R.context=h)}),c.useMemo(()=>({...v,context:h,refs:I,elements:A}),[v,I,A,h])}function ft(e,t,n){const r=new Map,s=n==="item";let i=e;if(s&&e){const{[kt]:o,[Dt]:u,...f}=e;i=f}return{...n==="floating"&&{tabIndex:-1,[pr]:""},...i,...t.map(o=>{const u=o?o[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((o,u)=>(u&&Object.entries(u).forEach(f=>{let[a,l]=f;if(!(s&&[kt,Dt].includes(a)))if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof l=="function"){var p;(p=r.get(a))==null||p.push(l),o[a]=function(){for(var m,v=arguments.length,b=new Array(v),d=0;d<v;d++)b[d]=arguments[d];return(m=r.get(a))==null?void 0:m.map(I=>I(...b)).find(I=>I!==void 0)}}}else o[a]=l}),o),{})}}function jr(e){e===void 0&&(e=[]);const t=e.map(u=>u?.reference),n=e.map(u=>u?.floating),r=e.map(u=>u?.item),s=c.useCallback(u=>ft(u,e,"reference"),t),i=c.useCallback(u=>ft(u,e,"floating"),n),o=c.useCallback(u=>ft(u,e,"item"),r);return c.useMemo(()=>({getReferenceProps:s,getFloatingProps:i,getItemProps:o}),[s,i,o])}const $r="Escape";function rt(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function He(e,t){return rt(t,e===dn||e===et,e===_e||e===Ke)}function dt(e,t,n){return rt(t,e===et,n?e===_e:e===Ke)||e==="Enter"||e===" "||e===""}function Ut(e,t,n){return rt(t,n?e===_e:e===Ke,e===et)}function Ht(e,t,n,r){const s=n?e===Ke:e===_e,i=e===dn;return t==="both"||t==="horizontal"&&r&&r>1?e===$r:rt(t,s,i)}function qr(e,t){const{open:n,onOpenChange:r,elements:s,floatingId:i}=e,{listRef:o,activeIndex:u,onNavigate:f=()=>{},enabled:a=!0,selectedIndex:l=null,allowEscape:p=!1,loop:m=!1,nested:v=!1,rtl:b=!1,virtual:d=!1,focusItemOnOpen:I="auto",focusItemOnHover:A=!0,openOnArrowKeyDown:h=!0,disabledIndices:R=void 0,orientation:O="vertical",parentOrientation:J,cols:z=1,scrollItemIntoView:Q=!0,virtualItemRef:ue,itemSizes:oe,dense:be=!1}=t,Y=Ze(s.floating),pe=Ie(Y),se=ht(),k=tt();q(()=>{e.dataRef.current.orientation=O},[e,O]);const g=ce(()=>{f(y.current===-1?null:y.current)}),j=vt(s.domReference),V=c.useRef(I),y=c.useRef(l??-1),T=c.useRef(null),F=c.useRef(!0),B=c.useRef(g),w=c.useRef(!!s.floating),ae=c.useRef(n),X=c.useRef(!1),ge=c.useRef(!1),W=Ie(R),ee=Ie(n),he=Ie(Q),we=Ie(l),[Re,M]=c.useState(),[D,C]=c.useState(),S=ce(()=>{function x(K){if(d){var H;(H=K.id)!=null&&H.endsWith("-fui-option")&&(K.id=i+"-"+Math.random().toString(16).slice(2,10)),M(K.id),k?.events.emit("virtualfocus",K),ue&&(ue.current=K)}else Ce(K,{sync:X.current,preventScroll:!0})}const N=o.current[y.current],E=ge.current;N&&x(N),(X.current?K=>K():requestAnimationFrame)(()=>{const K=o.current[y.current]||N;if(!K)return;N||x(K);const H=he.current;H&&$&&(E||!F.current)&&(K.scrollIntoView==null||K.scrollIntoView(typeof H=="boolean"?{block:"nearest",inline:"nearest"}:H))})});q(()=>{a&&(n&&s.floating?V.current&&l!=null&&(ge.current=!0,y.current=l,g()):w.current&&(y.current=-1,B.current()))},[a,n,s.floating,l,g]),q(()=>{if(a&&n&&s.floating)if(u==null){if(X.current=!1,we.current!=null)return;if(w.current&&(y.current=-1,S()),(!ae.current||!w.current)&&V.current&&(T.current!=null||V.current===!0&&T.current==null)){let x=0;const N=()=>{o.current[0]==null?(x<2&&(x?requestAnimationFrame:queueMicrotask)(N),x++):(y.current=T.current==null||dt(T.current,O,b)||v?ct(o,W.current):At(o,W.current),T.current=null,g())};N()}}else Ne(o,u)||(y.current=u,S(),ge.current=!1)},[a,n,s.floating,u,we,v,o,O,b,g,S,W]),q(()=>{var x;if(!a||s.floating||!k||d||!w.current)return;const N=k.nodesRef.current,E=(x=N.find(H=>H.id===se))==null||(x=x.context)==null?void 0:x.elements.floating,_=xe(fe(s.floating)),K=N.some(H=>H.context&&ie(H.context.elements.floating,_));E&&!K&&F.current&&E.focus({preventScroll:!0})},[a,s.floating,k,se,d]),q(()=>{if(!a||!k||!d||se)return;function x(N){C(N.id),ue&&(ue.current=N)}return k.events.on("virtualfocus",x),()=>{k.events.off("virtualfocus",x)}},[a,k,d,se,ue]),q(()=>{B.current=g,ae.current=n,w.current=!!s.floating}),q(()=>{n||(T.current=null,V.current=I)},[n,I]);const U=u!=null,$=c.useMemo(()=>{function x(E){if(!ee.current)return;const _=o.current.indexOf(E);_!==-1&&y.current!==_&&(y.current=_,g())}return{onFocus(E){let{currentTarget:_}=E;X.current=!0,x(_)},onClick:E=>{let{currentTarget:_}=E;return _.focus({preventScroll:!0})},...A&&{onMouseMove(E){let{currentTarget:_}=E;X.current=!0,ge.current=!1,x(_)},onPointerLeave(E){let{pointerType:_}=E;if(!(!F.current||_==="touch")&&(X.current=!0,y.current=-1,g(),!d)){var K;(K=pe.current)==null||K.focus({preventScroll:!0})}}}}},[ee,pe,A,o,g,d]),te=c.useCallback(()=>{var x;return J??(k==null||(x=k.nodesRef.current.find(N=>N.id===se))==null||(x=x.context)==null||(x=x.dataRef)==null?void 0:x.current.orientation)},[se,k,J]),ne=ce(x=>{if(F.current=!1,X.current=!0,x.which===229||!ee.current&&x.currentTarget===pe.current)return;if(v&&Ht(x.key,O,b,z)){He(x.key,te())||re(x),r(!1,x.nativeEvent,"list-navigation"),ve(s.domReference)&&(d?k?.events.emit("virtualfocus",s.domReference):s.domReference.focus());return}const N=y.current,E=ct(o,R),_=At(o,R);if(j||(x.key==="Home"&&(re(x),y.current=E,g()),x.key==="End"&&(re(x),y.current=_,g())),z>1){const K=oe||Array.from({length:o.current.length},()=>({width:1,height:1})),H=ur(K,z,be),ke=H.findIndex(le=>le!=null&&!Ge(o,le,R)),Ve=H.reduce((le,Te,We)=>Te!=null&&!Ge(o,Te,R)?We:le,-1),De=H[ir({current:H.map(le=>le!=null?o.current[le]:null)},{event:x,orientation:O,loop:m,rtl:b,cols:z,disabledIndices:cr([...(typeof R!="function"?R:null)||o.current.map((le,Te)=>Ge(o,Te,R)?Te:void 0),void 0],H),minIndex:ke,maxIndex:Ve,prevIndex:ar(y.current>_?E:y.current,K,H,z,x.key===et?"bl":x.key===(b?_e:Ke)?"tr":"tl"),stopEvent:!0})];if(De!=null&&(y.current=De,g()),O==="both")return}if(He(x.key,O)){if(re(x),n&&!d&&xe(x.currentTarget.ownerDocument)===x.currentTarget){y.current=dt(x.key,O,b)?E:_,g();return}dt(x.key,O,b)?m?y.current=N>=_?p&&N!==o.current.length?-1:E:Z(o,{startingIndex:N,disabledIndices:R}):y.current=Math.min(_,Z(o,{startingIndex:N,disabledIndices:R})):m?y.current=N<=E?p&&N!==-1?o.current.length:_:Z(o,{startingIndex:N,decrement:!0,disabledIndices:R}):y.current=Math.max(E,Z(o,{startingIndex:N,decrement:!0,disabledIndices:R})),Ne(o,y.current)&&(y.current=-1),g()}}),P=c.useMemo(()=>d&&n&&U&&{"aria-activedescendant":D||Re},[d,n,U,D,Re]),L=c.useMemo(()=>({"aria-orientation":O==="both"?void 0:O,...j?{}:P,onKeyDown:ne,onPointerMove(){F.current=!0}}),[P,ne,O,j]),de=c.useMemo(()=>{function x(E){I==="auto"&&sn(E.nativeEvent)&&(V.current=!0)}function N(E){V.current=I,I==="auto"&&un(E.nativeEvent)&&(V.current=!0)}return{...P,onKeyDown(E){F.current=!1;const _=E.key.startsWith("Arrow"),K=["Home","End"].includes(E.key),H=_||K,ke=Ut(E.key,O,b),Ve=Ht(E.key,O,b,z),De=Ut(E.key,te(),b),le=He(E.key,O),Te=(v?De:le)||E.key==="Enter"||E.key.trim()==="";if(d&&n){const je=k?.nodesRef.current.find($e=>$e.parentId==null),ye=k&&je?Qn(k.nodesRef.current,je.id):null;if(H&&ye&&ue){const $e=new KeyboardEvent("keydown",{key:E.key,bubbles:!0});if(ke||Ve){var We,yt;const bn=((We=ye.context)==null?void 0:We.elements.domReference)===E.currentTarget,Et=Ve&&!bn?(yt=ye.context)==null?void 0:yt.elements.domReference:ke?o.current.find(It=>It?.id===Re):null;Et&&(re(E),Et.dispatchEvent($e),C(void 0))}if((le||K)&&ye.context&&ye.context.open&&ye.parentId&&E.currentTarget!==ye.context.elements.domReference){var xt;re(E),(xt=ye.context.elements.domReference)==null||xt.dispatchEvent($e);return}}return ne(E)}if(!(!n&&!h&&_)){if(Te){const je=He(E.key,te());T.current=v&&je?null:E.key}if(v){De&&(re(E),n?(y.current=ct(o,W.current),g()):r(!0,E.nativeEvent,"list-navigation"));return}le&&(l!=null&&(y.current=l),re(E),!n&&h?r(!0,E.nativeEvent,"list-navigation"):ne(E),n&&g())}},onFocus(){n&&!d&&(y.current=-1,g())},onPointerDown:N,onPointerEnter:N,onMouseDown:x,onClick:x}},[Re,P,z,ne,W,I,o,v,g,r,n,h,O,te,b,l,k,d,ue]);return c.useMemo(()=>a?{reference:de,floating:L,item:$}:{},[a,de,L,$])}const Br=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Ur(e,t){var n,r;t===void 0&&(t={});const{open:s,elements:i,floatingId:o}=e,{enabled:u=!0,role:f="dialog"}=t,a=bt(),l=((n=i.domReference)==null?void 0:n.id)||a,p=c.useMemo(()=>{var h;return((h=Ze(i.floating))==null?void 0:h.id)||o},[i.floating,o]),m=(r=Br.get(f))!=null?r:f,b=ht()!=null,d=c.useMemo(()=>m==="tooltip"||f==="label"?{["aria-"+(f==="label"?"labelledby":"describedby")]:s?p:void 0}:{"aria-expanded":s?"true":"false","aria-haspopup":m==="alertdialog"?"dialog":m,"aria-controls":s?p:void 0,...m==="listbox"&&{role:"combobox"},...m==="menu"&&{id:l},...m==="menu"&&b&&{role:"menuitem"},...f==="select"&&{"aria-autocomplete":"none"},...f==="combobox"&&{"aria-autocomplete":"list"}},[m,p,b,s,l,f]),I=c.useMemo(()=>{const h={id:p,...m&&{role:m}};return m==="tooltip"||f==="label"?h:{...h,...m==="menu"&&{"aria-labelledby":l}}},[m,p,l,f]),A=c.useCallback(h=>{let{active:R,selected:O}=h;const J={role:"option",...R&&{id:p+"-fui-option"}};switch(f){case"select":return{...J,"aria-selected":R&&O};case"combobox":return{...J,"aria-selected":O}}return{}},[p,f]);return c.useMemo(()=>u?{reference:d,floating:I,item:A}:{},[u,d,I,A])}const vn=c.createContext(null),Rt=()=>{const e=c.useContext(vn);if(!e)throw new Error("useDropdownMenu must be used within a <DropdownMenu> provider");return e},Hr=(e,t,n)=>{c.useEffect(()=>{const r=s=>{const i=s.target;if(!(e.current&&"contains"in e.current&&e.current.contains(i))){if(n)for(const o of n){const u=o&&"current"in o?o.current:o;if(u&&"contains"in u&&u.contains(i))return}t(s)}};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[e,t,n])};function Gr({children:e,isOpen:t=!1,onOpenChange:n,placement:r="bottom-start",triggerRef:s}){const i=c.useRef([]),[o,u]=c.useState(null),{refs:f,floatingStyles:a,context:l,placement:p}=Wr({placement:r,open:t,onOpenChange:n,middleware:[wn(9),Tn(),Cn({padding:8})],whileElementsMounted:In,transform:!1}),m=()=>s?[s]:f.reference?[f.reference]:[];Hr(f.floating,()=>{t&&n(!1)},m());const v=Fr(l),b=Kr(l,{outsidePress:!1,escapeKey:!0}),d=Ur(l,{role:"menu"}),I=qr(l,{listRef:i,activeIndex:o,onNavigate:u,loop:!0}),{getReferenceProps:A,getItemProps:h,getFloatingProps:R}=jr([v,b,d,I]);return G.jsx(vn.Provider,{value:{isOpen:t,onOpenChange:n,refs:f,floatingStyles:a,context:l,getReferenceProps:A,getFloatingProps:R,getItemProps:h,listRef:i,activeIndex:o,triggerRef:s,currentPlacement:p},children:e})}Gr.__docgenInfo={description:"",methods:[],displayName:"DropdownMenu",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onOpenChange:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"boolean"}],raw:"SetStateAction<boolean>"}],raw:"Dispatch<SetStateAction<boolean>>"},description:""},placement:{required:!1,tsType:{name:"Extract",elements:[{name:"PlacementType"},{name:"union",raw:"'top' | 'top-start' | 'top-end' | 'bottom' | 'bottom-start' | 'bottom-end'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'top-start'"},{name:"literal",value:"'top-end'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'bottom-start'"},{name:"literal",value:"'bottom-end'"}]}],raw:`Extract<
  PlacementType,
  'top' | 'top-start' | 'top-end' | 'bottom' | 'bottom-start' | 'bottom-end'
>`},description:"",defaultValue:{value:"'bottom-start'",computed:!1}},triggerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"union",raw:"HTMLElement | null",elements:[{name:"HTMLElement"},{name:"null"}]}],raw:"RefObject<HTMLElement | null>"},description:""}}};const zr=Yt("div")({name:"MenuContent",class:"mwkvcw6",propsAsIs:!1}),Yr=({children:e})=>{const{currentPlacement:t,isOpen:n,listRef:r,refs:s,floatingStyles:i,context:o,getFloatingProps:u}=Rt(),f=t?.split("-")[0]??"";return n?G.jsx(dr,{elementsRef:r,children:G.jsx(Mr,{children:G.jsx(Nr,{context:o,modal:!1,children:G.jsx(zr,{"data-placement":f,ref:s.setFloating,style:i,...u(),children:e})})})}):null};Yr.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuContent",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""}}};const Xr=Yt("button")({name:"MenuItem",class:"m15gtcnl",propsAsIs:!1}),Zr="i3pmnfh",Jr=({children:e,onSelect:t,...n})=>{const{activeIndex:r,onOpenChange:s}=Rt(),{index:i,ref:o}=mr(),u=i===r,f=()=>{t?.(),s(!1)},a=l=>{(l.key==="Enter"||l.key===" ")&&u&&(l.preventDefault(),t?.(),s(!1))};return G.jsx(Xr,{role:"menuitem",tabIndex:u?0:-1,ref:o,className:Mn({[Zr]:r===i}),onClick:f,onKeyDown:a,...n,children:e})};Jr.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuItem",props:{children:{required:!0,tsType:{name:"ReactNode"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const Qr=({children:e,asChild:t,...n})=>{const{refs:r,getReferenceProps:s,onOpenChange:i,isOpen:o}=Rt(),u=a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i(!o))},f=t?Sn:"div";return G.jsx(f,{ref:t?r.setReference:void 0,...s(),onKeyDown:u,"aria-expanded":o,"aria-haspopup":"menu",...n,children:e})};Qr.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuTrigger",props:{asChild:{required:!1,tsType:{name:"boolean"},description:""}}};const eo="spryfdh",to=()=>G.jsx("div",{className:eo,role:"separator"});to.__docgenInfo={description:"",methods:[],displayName:"DropdownMenuSeparator"};export{Gr as D,Yr as a,Qr as b,Jr as c,to as d,ao as e,Rt as u};
