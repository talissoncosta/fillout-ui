import { Meta, ArgTypes, Canvas } from '@storybook/addon-docs/blocks';
import { PageNavigator } from 'src/components/page-navigator';
import PageNavigatorStories, { Default, WithManyPages, WithLongTitles, MoreComplex, NoPages } from './PageNavigator.stories';

<Meta of={PageNavigatorStories} />

# PageNavigator

The `PageNavigator` component provides an interactive, horizontally scrollable UI for navigating between logical "pages" or steps. It supports keyboard and pointer navigation, dynamic page creation, reordering via drag-and-drop, and accessibility best practices.


##  Features

- **Keyboard navigation** with arrow keys (looping and focusable)
- **Dynamic page insertion** via inline `+` buttons between pages
- **Drag-and-drop reordering** using `@dnd-kit/core`
- **Visual highlight** when reordering completes
- **Accessibility**:
    - Uses `aria-current="page"` for the active page
    - Focus restoration and announcement-friendly labeling
    - **Handles long titles gracefully** with truncation and tooltips

---

## Props

<ArgTypes of={PageNavigator} />

```ts
interface PageNavigatorProps {
  pages: {
    title: string;
    icon: React.ReactElement;
    id: string;
  }[];
  activePageId: string;
  onSelectPage?: (id: string) => void;
  onAddNewPage?: (index: number) => void;
  onReorder?: (updatedPages: Page[]) => void;
}
```

---

## Usage Example

Use PageNavigator to help users switch between steps or views in your app. Each page requires a unique id, an icon, and a title.

You can:
 - Dynamically add new pages at the end or between pages
 - Reorder pages with drag-and-drop
 - Provide tooltips or accessible names for better UX

---

## Stories

### Default

<Canvas of={Default} />

---

### With Many Pages

<Canvas of={WithManyPages} />

---

### With Long Titles

<Canvas of={WithLongTitles} />

---

### More Complex (with dynamic ID generation)

<Canvas of={MoreComplex} />

---

### No Pages

<Canvas of={NoPages} />

---

## Best Practices

- Use concise page titles to avoid overflow.
- Combine icons + text for better recognition.
- Use the onReorder callback to persist page order after drag-and-drop.
- Use onAddNewPage with the index to control where new pages are inserted.
- Enhance accessibility with aria-label, tooltips, and visible focus styles.

---

##  Tip

- Press and hold a page to show the drag handle and initiate reordering.
- Try dragging pages to see how others adjust and animate space.
- Inline + buttons make inserting new pages intuitive and precise.
